HAVE ONE HANDLER PER HTTP METHOD
everything else dealt with by rules

rules files grouped by path functionality

first agenda sorts out auth, second does routing

rule ProxyDollar {
    when {
        rr : RequestRouter rr.path.substring(0, 3) == "/$/";
        r : Route r.map["target"] == "";
    }
    then {
        log.debug("*** Proxy rule triggered ***"); 
        modify(r, function(){this.map["target"] = "ProxyHandler";});
        modify(r, function(){this.map["path"] = rr.path});
    }
}


        